{% load staticfiles %}
<div id="predictionData">
    <table style="background:#e6e8ed;width:100%">
        {% if can_add_entry or can_remove_entry %}
            <tr class="col_header">
                <td colspan=7>
                    Workspace Select: {% if can_add_entry %}<a href="../../" onclick="return toggleAllSSRSelect(true,'{{ csrf_token }}');">All</a>{% endif %}{% if can_remove_entry %}, <a href="../../" onclick="return toggleAllSSRSelect(false,'{{ csrf_token }}');">None</a>{% endif %}&nbsp;&nbsp;
                </td>
            </tr>
        {% endif %}
        <tr class="col_header">
            <td>&nbsp;</td>
            <td width=175px>Title</td>
            <td>Description</td>
            <td style="width:45px">&nbsp;</td>
            <td width=175px>SSR Title</td>
            <td width=300px>SSR Description</td>
            <td>&nbsp;</td>
        </tr>
        {% for ssr_selected,ssr_is_favorite,ssr_subscribed_to_user,prediction in predictions %}
            <tr class="{% cycle 'even_row' 'odd_row' %}" valign=top>
                <td>{{ forloop.counter }}</td>
                <td>
                    <a href="/bodb/prediction/{{ prediction.id }}/" onclick="return openInNewTab('/bodb/prediction/{{ prediction.id }}/');">{{ prediction.title }}</a>
                    {% if prediction.draft %}<span style="color: red;">&lt;draft&gt;</span>{% endif %}
                </td>
                <td>{{ prediction.brief_description }}</td>
                <td align=center style="width:45px">
                    {% if user.is_authenticated and not user.is_anonymous and prediction.ssr  %}
                        <a id="favLink" href="" onclick="return toggleFavorite({{ prediction.ssr.id }},'favIcon-{{ prediction.ssr.id }}','{{ csrf_token }}');">
                            <img id="favIcon-{{ prediction.ssr.id }}" name="favIcon-{{ prediction.ssr.id }}" src="{% if ssr_is_favorite %}{% static 'bodb/images/star.png' %}{% else %}{% static 'bodb/images/grey_star.png' %}{% endif %}"/>
                        </a>
                        <input type=checkbox name="selectedSSRCheckbox" id="selectedSSRCheckbox_{{ prediction.ssr.id }}" value="{{ prediction.ssr.id }}" {% if ssr_selected %}checked=True{% endif %} {% if ssr_selected and not can_remove_entry or not ssr_selected and not can_add_entry %}disabled="True"{% endif %} onclick="toggleSSRSelect(this.value, '{{ csrf_token }}');"/>
                    {% endif %}
                    <input type=hidden name="selectedSSR" id="selectedSSR_{{ prediction.ssr.id }}" value="{{ prediction.ssr.id }}"/>
                </td>
                <td>
                    {{ prediction.ssr.title }}
                    {% if prediction.ssr.draft %}<span style="color: red;">&lt;draft&gt;</span>{% endif %}
                </td>
                <td>{{ prediction.ssr.brief_description }}</td>
                <td><span id="ssr_{{ prediction.ssr.id }}_message" name="ssr_{{ prediction.ssr.id }}_message" class="messages"></span></td>
            </tr>
        {% endfor %}
    </table>
</div>