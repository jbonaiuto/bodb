{% load staticfiles %}
<div id="relatedModelData" style="display:none">
    <b class="b1f"></b><b class="b2f"></b><b class="b3f"></b><b class="b4f"></b>
    <table class="tab_panel" style="background:#e6e8ed;">
        <tr class="col_header">
            <td colspan=5>
                {% if can_add_entry or can_remove_entry %}
                    Workspace Select: {% if can_add_entry %}<a href="../" onclick="return toggleAllModelSelect(true,'{{ csrf_token }}');">All</a>{% endif %}{% if can_remove_entry %}, <a href="../" onclick="return toggleAllModelSelect(false,'{{ csrf_token }}');">None</a>{% endif %}&nbsp;&nbsp;
                {% endif %}
            </td>
        </tr>
        <tr class="col_header">
            <td style="width:45px">&nbsp;</td>
            <td width=200px>Title</td>
            <td width=300px>Brief Description</td>
            <td>Relationship</td>
            <td width=200px>&nbsp;</td>
        </tr>
        {% for selected,is_favorite,subscribed,related_model in related_model_list %}
            <tr class="{% cycle 'even_row' 'odd_row' %}" valign=top>
                <td align=center>
                    {% if user.is_authenticated and not user.is_anonymous  %}
                        <a id="favLink" href="" onclick="return toggleFavorite({{ related_model.model.id }},'favIcon-{{ related_model.model.id }}','{{ csrf_token }}');">
                            <img id="favIcon-{{ related_model.model.id }}" name="favIcon-{{ related_model.model.id }}" src="{% if is_favorite %}{% static 'bodb/images/star.png' %}{% else %}{% static 'bodb/images/grey_star.png' %}{% endif %}"/>
                        </a>
                        <input type=checkbox name="selectedModelCheckbox" id="selectedModelCheckbox_{{ related_model.model.id }}" value="{{ related_model.model.id }}" {% if selected %}checked=True{% endif %} {% if selected and not can_remove_entry or not selected and not can_add_entry %}disabled="True"{% endif %} onclick="toggleModelSelect(this.value, '{{ csrf_token }}');"/>
                        <input type=hidden name="selectedModel" id="selectedModel_{{ related_model.model.id }}" value="{{ related_model.model.id }}"/>
                    {% endif %}
                </td>
                <td>
                    <a href="/bodb/model/{{ related_model.model.id }}/">{{ related_model.model }}</a>
                </td>
                <td>
                    {{ related_model.model.brief_description }}
                </td>
                <td>
                    {{ related_model.relationship }}
                </td>
                <td><span id="model_{{ related_model.model.id }}_message" name="model_{{ related_model.model.id }}_message" class="messages"></span> </td>
            </tr>
        {% endfor %}
        {% for selected,is_favorite,subscribed,related_model in reverse_related_model_list %}
            <tr class="{% cycle 'even_row' 'odd_row' %}" valign=top>
                <td align=center>
                    {% if user.is_authenticated and not user.is_anonymous  %}
                        <a id="favLink" href="" onclick="return toggleFavorite({{ related_model.document.id }},'favIcon-{{ related_model.document.id }}','{{ csrf_token }}');">
                            <img id="favIcon-{{ related_model.document.id }}" name="favIcon-{{ related_model.document.id }}" src="{% if is_favorite %}{% static 'bodb/images/star.png' %}{% else %}{% static 'bodb/images/grey_star.png' %}{% endif %}"/>
                        </a>
                        <input type=checkbox name="selectedModelCheckbox" id="selectedModelCheckbox_{{ related_model.document.id }}" value="{{ related_model.document.id }}" {% if selected %}checked=True{% endif %} {% if selected and not can_remove_entry or not selected and not can_add_entry %}disabled="True"{% endif %} onclick="toggleModelSelect(this.value, '{{ csrf_token }}');"/>
                        <input type=hidden name="selectedModel" id="selectedModel_{{ related_model.document.id }}" value="{{ related_model.document.id }}"/>
                    {% endif %}
                </td>
                <td>
                    * <a href="/bodb/model/{{ related_model.document.id }}/">{{ related_model.document }}</a>
                </td>
                <td>
                    {{ related_model.document.brief_description }}
                </td>
                <td>
                    {{ related_model.relationship }}
                </td>
                <td><span id="model_{{ related_model.document.id }}_message" name="model_{{ related_model.document.id }}_message" class="messages"></span> </td>
            </tr>
        {% endfor %}
        <tr class="col_header">
            <td colspan="5">* indicates a reverse relationship</td>
        </tr>
    </table>
</div>
