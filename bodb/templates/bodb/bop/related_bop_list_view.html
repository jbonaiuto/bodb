{% load staticfiles %}
<div id="relatedBopData" style="display:none">
    <b class="b1f"></b><b class="b2f"></b><b class="b3f"></b><b class="b4f"></b>
    <table class="tab_panel" style="background:#e6e8ed;">
        <tr class="col_header">
            <td colspan={% if bop_relationship %}6{% else %}5{% endif %}>
                {% if can_add_entry or can_remove_entry %}
                    Workspace Select: {% if can_add_entry %}<a href="../" onclick="return toggleAllBOPSelect(true,'{{ csrf_token }}');">All</a>{% endif %}{% if can_remove_entry %}, <a href="../" onclick="return toggleAllBOPSelect(false,'{{ csrf_token }}');">None</a>{% endif %}&nbsp;&nbsp;
                {% endif %}
            </td>
        </tr>
        <tr class="col_header">
            <td style="width:45px">&nbsp;</td>
            <td width=200px>Title</td>
            <td width=300px>Brief Description</td>
            {% if bop_relationship %}
                <td width=150px>Relationship</td>
            {% endif %}
            <td width=300px>Relevance Narrative</td>
            <td>&nbsp;</td>
        </tr>
        {% for selected,is_favorite,subscribed,related_bop in related_bop_list %}
            <tr class="{% cycle 'even_row' 'odd_row' %}" valign=top>
                <td>
                    {% if user.is_authenticated and not user.is_anonymous %}
                        <a id="favLink" href="" onclick="return toggleFavorite({{ related_bop.bop.id }},'favIcon-{{ related_bop.bop.id }}','{{ csrf_token }}');">
                            <img id="favIcon-{{ related_bop.bop.id }}" name="favIcon-{{ related_bop.bop.id }}" src="{% if is_favorite %}{% static 'bodb/images/star.png' %}{% else %}{% static 'bodb/images/grey_star.png' %}{% endif %}"/>
                        </a>
                        <input type=checkbox name="selectedBOPCheckbox" id="selectedBOPCheckbox_{{ related_bop.bop.id }}" value="{{ related_bop.bop.id }}" {% if selected %}checked=True{% endif %} {% if selected and not can_remove_entry or not selected and not can_add_entry %}disabled="True"{% endif %} onclick="toggleBOPSelect(this.value, '{{ csrf_token }}');"/>
                    {% endif %}
                </td>
                <td>
                    <a href="/bodb/bop/{{ related_bop.bop.id }}/">{{ related_bop.bop }}</a>
                </td>
                <td>
                    {{ related_bop.bop.brief_description }}
                </td>
                {% if bop_relationship %}
                    <td>
                        {{ related_bop.relationship }}
                    </td>
                {% endif %}
                <td>
                    {{ related_bop.relevance_narrative }}
                </td>
                <td><span id="bop_{{ related_bop.bop.id }}_message" name="bop_{{ related_bop.bop.id }}_message" class="messages"></span></td>
            </tr>
        {% endfor %}
        {% for selected,is_favorite,subscribed,related_bop in reverse_related_bop_list %}
            <tr class="{% cycle 'even_row' 'odd_row' %}" valign=top>
                <td>
                    {% if user.is_authenticated and not user.is_anonymous %}
                        <a id="favLink" href="" onclick="return toggleFavorite({{ related_bop.document.id }},'favIcon-{{ related_bop.document.id }}','{{ csrf_token }}');">
                            <img id="favIcon-{{ related_bop.document.id }}" name="favIcon-{{ related_bop.document.id }}" src="{% if is_favorite %}{% static 'bodb/images/star.png' %}{% else %}{% static 'bodb/images/grey_star.png' %}{% endif %}"/>
                        </a>
                        <input type=checkbox name="selectedBOPCheckbox" id="selectedBOPCheckbox_{{ related_bop.document.id }}" value="{{ related_bop.document.id }}" {% if selected %}checked=True{% endif %} {% if selected and not can_remove_entry or not selected and not can_add_entry %}disabled="True"{% endif %} onclick="toggleBOPSelect(this.value, '{{ csrf_token }}');"/>
                    {% endif %}
                </td>
                <td>
                    * <a href="/bodb/bop/{{ related_bop.document.id }}/">{{ related_bop.document }}</a>
                </td>
                <td>
                    {{ related_bop.document.brief_description }}
                </td>
                {% if bop_relationship %}
                    <td>
                        {{ related_bop.relationship }}
                    </td>
                {% endif %}
                <td>
                    {{ related_bop.relevance_narrative }}
                </td>
                <td><span id="bop_{{ related_bop.document.id }}_message" name="bop_{{ related_bop.document.id }}_message" class="messages"></span></td>
            </tr>
        {% endfor %}
        <tr class="col_header">
            <td colspan="{% if bop_relationship %}6{% else %}5{% endif %}">* indicates a reverse relationship</td>
        </tr>
    </table>
</div>
